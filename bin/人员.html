<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>ECharts test</title>
<script src="../js/esl.js"></script>
<script src="../js/config.js"></script>
</head>

<body style="font:宋体;color:black">
<div id="view" style=" width:450px; height:400px; margin:100px;border:0px solid green"></div>

<script language="javascript">
	var dtx=[], dty=[];
	dty = [71, 27, 40, 20, 61, 30, 35];
	dtx = ['现金管理部','营销管理部','投资银行部','企业业务部','风险管理部','金融市场部','机构业务部']
	data = dtx.map(function(d, i){ return {value:dty[i], name:d } });
option = {	
    title : {
        text: '公司人员分布',
        subtext: '', x:'center',
    },
    tooltip : {
        trigger: 'item', formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'horizontal', y : 'bottom',
        data:dtx
    },
    series : [
        {
            name:'部门人数', type:'pie', radius : '55%', center: ['50%', '45%'], selectedMode: 'single',
            data:data,
			itemStyle : { normal : { label : { formatter : function (params) 
							{  return params.name + "" + (params.percent - 0).toFixed(0) + '%' }
			}}},
        }
    ]
};


	console.log(option);
	Init(option, "view");
	function Init(option,id){
		id=id || "main"
		require(['echarts','echarts/chart/line','echarts/chart/bar','echarts/chart/pie'],
            function (ec) {
                var myChart = ec.init(document.getElementById(id));				
				myChart.setOption(option);
            }
        )	 		
	}

</script>

</body>
</html>
